<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Doge Scalping Bot Realistis</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="max-w-xl mx-auto mt-10 p-6 bg-white rounded-2xl shadow-xl">
    <h1 class="text-2xl font-bold text-center mb-6">Doge Scalping Bot</h1>

    <div class="mb-4">
      <p class="font-semibold">Saldo DOGE:</p>
      <p id="saldoDoge">20 DOGE</p>
    </div>

    <div class="mb-4">
      <p class="font-semibold">Harga Pasar (Realtime):</p>
      <p id="hargaPasar">Loading...</p>
    </div>

    <div class="mb-4">
      <p class="font-semibold">Fee Transaksi (0.1%):</p>
      <p id="feeTransaksi">-</p>
    </div>

    <div class="mb-4">
      <p class="font-semibold">Harga Beli Terakhir:</p>
      <p id="hargaBeli">-</p>
    </div>

    <div class="mb-4">
      <p class="font-semibold">Keuntungan:</p>
      <p id="untung">-</p>
    </div>

    <div class="mt-6">
      <h2 class="font-bold mb-2">Trick & Target</h2>
      <p id="trickDesc">Gunakan momen cepat untuk ambil posisi ideal.</p>
      <p class="mt-2">Harga ideal beli: <span id="hargaIdealBeli">-</span></p>
      <p>Harga ideal jual: <span id="hargaIdealJual">-</span></p>
    </div>

    <div class="mt-6 flex space-x-4">
      <button onclick="beliSekarang()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">Saya Telah Membeli</button>
      <button onclick="jualSekarang()" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded">Saya Telah Menjual</button>
    </div>

    <div class="mt-10 text-sm text-gray-500">
      <p>Bot mendeteksi pola candle sederhana (naik/turun cepat) untuk memberi hint.</p>
      <p id="candleHint" class="mt-2 font-semibold text-blue-600"></p>
    </div>

    <div class="mt-6 text-sm text-gray-600">
      <div class="flex justify-between items-center mb-1">
        <p class="font-semibold">Log Aktivitas:</p>
        <button onclick="clearLog()" class="text-red-500 hover:underline text-xs">Hapus Semua</button>
      </div>
      <div id="logArea" class="space-y-1 max-h-40 overflow-y-auto text-xs bg-gray-100 p-2 rounded"></div>
    </div>
  </div>

  <script>
    const saldoDoge = 20;
    const feePersen = 0.001; // 0.1%
    let hargaBeli = null;
    let previousHarga = null;
    let lastSignal = '';
    let lastHarga = null;

    async function fetchHarga() {
      try {
        const res = await axios.get('https://api.binance.com/api/v3/ticker/price?symbol=DOGEUSDT');
        const harga = parseFloat(res.data.price);
        const totalUSDT = harga * saldoDoge;
        const fee = totalUSDT * feePersen;

        document.getElementById("hargaPasar").innerText = `$${totalUSDT.toFixed(4)} (total)`;
        document.getElementById("feeTransaksi").innerText = `$${fee.toFixed(5)}`;

        const hargaEl = document.getElementById("hargaPasar");
        if (lastHarga !== null) {
          hargaEl.style.color = harga > lastHarga ? 'green' : harga < lastHarga ? 'red' : 'black';
        }
        lastHarga = harga;

        if (hargaBeli !== null) {
          const profit = (harga - hargaBeli) * saldoDoge - fee;
          document.getElementById("untung").innerText = `$${profit.toFixed(5)}`;
          document.getElementById("hargaBeli").innerText = `$${hargaBeli.toFixed(5)}`;
          document.getElementById("hargaIdealJual").innerText = `$${(hargaBeli + 0.002).toFixed(5)}`;
        } else {
          document.getElementById("hargaIdealBeli").innerText = `$${(harga - 0.002).toFixed(5)}`;
        }

        if (previousHarga !== null) {
          if (harga > previousHarga + 0.001 && lastSignal !== 'up') {
            document.getElementById("candleHint").innerText = "Candle naik cepat, pertimbangkan JUAL";
            logAktivitas("Candle naik cepat!");
            lastSignal = 'up';
          } else if (harga < previousHarga - 0.001 && lastSignal !== 'down') {
            document.getElementById("candleHint").innerText = "Candle turun cepat, pertimbangkan BELI";
            logAktivitas("Candle turun cepat!");
            lastSignal = 'down';
          }
        }
        previousHarga = harga;
      } catch (e) {
        document.getElementById("hargaPasar").innerText = `Gagal ambil harga`;
        logAktivitas("Gagal ambil data harga.");
      }
    }

    function beliSekarang() {
      hargaBeli = lastHarga;
      logAktivitas(`Beli DOGE di $${hargaBeli.toFixed(5)}`);
      document.getElementById("hargaIdealJual").innerText = `$${(hargaBeli + 0.002).toFixed(5)}`;
    }

    function jualSekarang() {
      if (hargaBeli === null) {
        logAktivitas("Kamu belum beli DOGE!");
        return;
      }
      const fee = saldoDoge * lastHarga * feePersen;
      const profit = (lastHarga - hargaBeli) * saldoDoge - fee;
      logAktivitas(`Jual DOGE di $${lastHarga.toFixed(5)} | Profit bersih: $${profit.toFixed(5)}`);
      hargaBeli = null;
      document.getElementById("hargaBeli").innerText = '-';
      document.getElementById("untung").innerText = '-';
      document.getElementById("hargaIdealJual").innerText = '-';
    }

    function logAktivitas(pesan) {
      const waktu = `[${new Date().toLocaleTimeString()}] ${pesan}`;
      const log = JSON.parse(localStorage.getItem("dogeLog")) || [];
      log.push(waktu);
      localStorage.setItem("dogeLog", JSON.stringify(log.slice(-50)));
      loadLog();
    }

    function loadLog() {
      const log = JSON.parse(localStorage.getItem("dogeLog")) || [];
      const container = document.getElementById("logArea");
      container.innerHTML = "";
      log.slice().reverse().forEach(msg => {
        const p = document.createElement("p");
        p.innerText = msg;
        container.appendChild(p);
      });
    }

    function clearLog() {
      localStorage.removeItem("dogeLog");
      loadLog();
    }

    loadLog();
    setInterval(fetchHarga, 1500);
  </script>
</body>
</html>
