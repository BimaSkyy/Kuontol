<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scalping DOGE Bot</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f8f9fa; font-family: 'Segoe UI', sans-serif; }
    .card { box-shadow: 0 0 12px rgba(0,0,0,0.1); }
    #logs { max-height: 200px; overflow-y: auto; white-space: pre-wrap; background: #f1f1f1; padding: 10px; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="container py-5">
    <h2 class="text-center mb-4">Scalping Bot DOGE/USDT</h2>
    <div class="row g-4">
      <div class="col-md-6">
        <div class="card p-3">
          <h5>Harga DOGE Saat Ini: <span id="hargaSekarang">Loading...</span></h5>
          <p>Harga 20 DOGE: <span id="hargaTotal"></span></p>
          <p>Fee Jual: <span id="feeJual"></span></p>
          <p>Fee Beli: <span id="feeBeli"></span></p><label>Harga Beli Manual</label>
      <input type="number" id="hargaBeliManual" class="form-control" />

      <label class="mt-2">Harga Jual Manual</label>
      <input type="number" id="hargaJualManual" class="form-control" />

      <button class="btn btn-primary mt-3" onclick="hitungProfit()">Hitung Potensi Profit</button>

      <div class="mt-3">
        <p>Profit jika beli di <span id="beliDi"></span> dan jual di <span id="jualDi"></span>: <strong><span id="hasilProfit"></span></strong></p>
        <p>Rekomendasi jual jika beli di <span id="rekomBeli"></span>: <strong><span id="rekomJual"></span></strong></p>
      </div>

      <div class="mt-3">
        <p>Status beli: <span id="statusBeli"></span></p>
        <p>Status jual: <span id="statusJual"></span></p>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card p-3">
      <h5>Logs Aktivitas</h5>
      <div id="logs"></div>
    </div>
  </div>
</div>

  </div>  <script>
    const dogeAmount = 20;
    let hargaSaatIni = 0;

    function save(key, value) {
      localStorage.setItem(key, JSON.stringify(value));
    }

    function load(key) {
      return JSON.parse(localStorage.getItem(key));
    }

    function log(msg) {
      const logs = document.getElementById('logs');
      logs.innerText += `[${new Date().toLocaleTimeString()}] ${msg}\n`;
      logs.scrollTop = logs.scrollHeight;
    }

    async function ambilHargaDOGE() {
      try {
        const res = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=DOGEUSDT');
        const data = await res.json();
        hargaSaatIni = parseFloat(data.lastPrice);
        const total = hargaSaatIni * dogeAmount;
        const fee = total * 0.001; // fee 0.1%

        document.getElementById('hargaSekarang').innerText = hargaSaatIni.toFixed(6);
        document.getElementById('hargaTotal').innerText = `$${total.toFixed(4)}`;
        document.getElementById('feeJual').innerText = `$${fee.toFixed(4)}`;
        document.getElementById('feeBeli').innerText = `$${fee.toFixed(4)}`;

        cekAutoOrder();
      } catch (err) {
        log('Gagal mengambil harga DOGE.');
      }
    }

    function hitungProfit() {
      const beli = parseFloat(document.getElementById('hargaBeliManual').value);
      const jual = parseFloat(document.getElementById('hargaJualManual').value);
      if (isNaN(beli) || isNaN(jual)) return;

      save('hargaBeliManual', beli);
      save('hargaJualManual', jual);

      const totalBeli = beli * dogeAmount;
      const totalJual = jual * dogeAmount;
      const fee = (totalBeli + totalJual) * 0.001;
      const profit = totalJual - totalBeli - fee;

      document.getElementById('beliDi').innerText = beli;
      document.getElementById('jualDi').innerText = jual;
      document.getElementById('hasilProfit').innerText = `$${profit.toFixed(4)}`;

      const rekomendasiJual = (beli * dogeAmount + fee) / dogeAmount;
      document.getElementById('rekomBeli').innerText = beli;
      document.getElementById('rekomJual').innerText = rekomendasiJual.toFixed(6);

      log(`Hitung profit: beli ${beli}, jual ${jual}, profit $${profit.toFixed(4)}`);
    }

    function cekAutoOrder() {
      const beli = load('hargaBeliManual');
      const jual = load('hargaJualManual');
      if (!beli || !jual) return;

      if (hargaSaatIni <= beli) {
        document.getElementById('statusBeli').innerText = 'TERBELI (Limit Order Match)';
        log('Limit beli 20 DOGE telah match.');
      } else {
        document.getElementById('statusBeli').innerText = 'BELUM TERBELI';
      }

      if (hargaSaatIni >= jual) {
        document.getElementById('statusJual').innerText = 'TERJUAL (Limit Order Match)';
        log('Limit jual 20 DOGE telah match.');
      } else {
        document.getElementById('statusJual').innerText = 'BELUM TERJUAL';
      }
    }

    setInterval(ambilHargaDOGE, 5000);
    window.onload = () => {
      if (load('hargaBeliManual')) document.getElementById('hargaBeliManual').value = load('hargaBeliManual');
      if (load('hargaJualManual')) document.getElementById('hargaJualManual').value = load('hargaJualManual');
      ambilHargaDOGE();
    }
  </script></body>
</html>
